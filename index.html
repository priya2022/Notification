<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>
  <body>
    <h2>Notification</h2>
    <button onclick="requestPermission()">To Notify</button>
    <button onclick="sendNotification()">To send Notification</button>

    <script>
      function requestPermission() {
        // Check if notifications are supported
        if (typeof Notification == "undefined") {
          console.error("Notification not supported");
          return;
        }
        // We request the permission, which opens a dialog box asking
        // for notifications.
        var promise = Notification.requestPermission();
        // The function returns a promise (which tells in the future the result
        // of the notification
        promise.then((permission) => {
          // promise.then is only called when the user has clicked 'Allow'
          // or 'Block'
          if (permission != "granted") {
            // If permission is not granted, error
            console.error("Notification permission denied!");
            return;
          }
          // If permission is granted, log that to the console.
          console.log("Permission granted");
        });
      }

      function sendNotification() {
        var myNotification = new Notification("This is a test notification", {
          body: "You have allowed notifications, this is just a test",
        });
        myNotification.onclick = (e) => {
          myNotification.close();
          console.log("Notification closed");
        };
      }
    </script>
  </body>
</html>
